#!/usr/bin/env node

// read a tap stream from stdin.

var TapConsumer = require("../lib/tap-consumer")
  , TapProducer = require("../lib/tap-producer")

var tc = new TapConsumer
  , tp = new TapProducer

//process.stdin.pipe(tc)
process.stdin.on("data", function (c) {
  c = c + ""
  // console.error(JSON.stringify(c).substr(0, 100))
  tc.write(c)
})
process.stdin.on("end", function () { tc.end() })
process.stdin.resume()
//tc.pipe(tp)
tc.on("data", function (c) {
  tp.write(c)
})
tc.on("end", function () {
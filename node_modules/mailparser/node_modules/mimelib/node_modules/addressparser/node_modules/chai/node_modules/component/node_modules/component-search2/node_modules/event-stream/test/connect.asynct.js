var es = require('../')
  , it = require('it-is').style('colour')
  , d = require('ubelt')

function makeExamplePipe() {

  return es.connect(
    es.map(function (data, callback) {
      callback(null, data * 2)
    }),
    es.map(function (data, callback) {
      d.delay(callback)(null, data)    
    }),
    es.map(function (data, callback) {
      callback(null, data + 2)
    }))
}

exports['simple pipe'] = function (test) {

  var pipe = makeExamplePipe()

  pipe.on('data', function (data) {
    it(data
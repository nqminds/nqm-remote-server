'use strict';
var StackUtils = require('stack-utils');
var debug = require('debug')('ava');

function indent(str) {
	return '    ' + str;
}

// ignore unimportant stack trace lines
var ignoreStackLines = [];

var avaInternals = /\/ava\/(?:lib\/)?[\w-]+\.js:\d+:\d+\)?$/;
var avaDependencies = /\/node_modules\/(?:bluebird|empower-core|(?:ava\/node_modules\/)?(?:babel-runtime|core-js))\//;

if (!debug.enabled) {
	ignoreStackLines = StackUtils.nodeInternals();
	ignoreStackLines.push(avaInternals);
	ignoreStackL